<!doctype html>
<html lang="de">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta name="theme-color" content="#111111" />
    <title>Drink Log</title>
    <style>
        :root {
            color-scheme: light dark;
            --bg: #0f0f10;
            --card: #17171a;
            --text: #f4f4f5;
            --muted: #a1a1aa;
            --border: rgba(255, 255, 255, .12);
            --focus: rgba(255, 255, 255, .22);
            --ok: rgba(34, 197, 94, .18);
            --err: rgba(239, 68, 68, .18);
            --radius: 16px;
        }

        @media (prefers-color-scheme: light) {
            :root {
                --bg: #f6f7f8;
                --card: #ffffff;
                --text: #111827;
                --muted: #6b7280;
                --border: rgba(17, 24, 39, .12);
                --focus: rgba(17, 24, 39, .18);
            }
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
            background: var(--bg);
            color: var(--text);
            padding: env(safe-area-inset-top) 16px env(safe-area-inset-bottom) 16px;
        }

        .wrap {
            max-width: 520px;
            margin: 0 auto;
            padding: 18px 0 28px;
        }

        h1 {
            font-size: 22px;
            margin: 10px 0 14px;
            letter-spacing: .2px;
        }

        .card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 14px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, .18);
        }

        .grid {
            display: grid;
            gap: 12px;
            grid-template-columns: 1fr;
        }

        .row2 {
            display: grid;
            gap: 12px;
            grid-template-columns: 1fr 1fr;
        }

        label {
            display: block;
            font-size: 13px;
            color: var(--muted);
            margin: 0 0 6px;
        }

        input,
        select,
        textarea,
        button {
            width: 100%;
            font-size: 16px;
            color: var(--text);
            background: transparent;
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 12px 12px;
            outline: none;
        }

        textarea {
            min-height: 84px;
            resize: vertical;
        }

        input:focus,
        select:focus,
        textarea:focus {
            border-color: var(--focus);
            box-shadow: 0 0 0 4px rgba(255, 255, 255, .08);
        }

        @media (prefers-color-scheme: light) {

            input:focus,
            select:focus,
            textarea:focus {
                box-shadow: 0 0 0 4px rgba(17, 24, 39, .06);
            }
        }

        .actions {
            display: grid;
            gap: 10px;
            grid-template-columns: 1fr;
            margin-top: 12px;
        }

        button {
            border: 0;
            background: var(--text);
            color: var(--bg);
            font-weight: 650;
            padding: 13px 12px;
            border-radius: 14px;
            cursor: pointer;
            -webkit-tap-highlight-color: transparent;
        }

        button:disabled {
            opacity: .55;
            cursor: default;
        }

        .secondary {
            background: transparent;
            color: var(--text);
            border: 1px solid var(--border);
            font-weight: 600;
        }

        .hint {
            font-size: 12px;
            color: var(--muted);
            margin-top: 10px;
            line-height: 1.35;
        }

        .toast {
            margin-top: 12px;
            padding: 10px 12px;
            border-radius: 12px;
            border: 1px solid var(--border);
            display: none;
            font-size: 14px;
        }

        .toast.ok {
            display: block;
            background: var(--ok);
        }

        .toast.err {
            display: block;
            background: var(--err);
        }
    </style>
</head>

<body>
    <div class="wrap">
        <h1>Drink Log</h1>

        <div class="card">
            <form id="f" class="grid" autocomplete="on">
                <div class="row2">
                    <div>
                        <label for="date">Datum</label>
                        <input id="date" name="date" type="date" required />
                    </div>
                    <div>
                        <label for="time">Uhrzeit</label>
                        <input id="time" name="time" type="time" required />
                    </div>
                </div>

                <div>
                    <label for="category">Kategorie</label>
                    <select id="category" name="category" required>
                        <option value="" disabled selected>Bitte auswählen</option>
                        <option>Bier</option>
                        <option>Wein</option>
                        <option>Sekt</option>
                        <option>Cocktail</option>
                        <option>Longdrink</option>
                        <option>Shot</option>
                        <option>Sonstiges</option>
                    </select>
                </div>

                <div>
                    <label for="drink">Getränk</label>
                    <input id="drink" name="drink" type="text" placeholder="z.B. Pils, Rotwein, Gin Tonic" />
                </div>

                <div class="row2">
                    <div>
                        <label for="amount">Menge</label>
                        <input id="amount" name="amount" type="number" inputmode="decimal" step="0.1" min="0"
                            placeholder="z.B. 500" required />
                    </div>
                    <div>
                        <label for="unit">Einheit</label>
                        <select id="unit" name="unit" required>
                            <option value="ml" selected>ml</option>
                            <option value="cl">cl</option>
                            <option value="Stück">Stück</option>
                            <option value="Glas">Glas</option>
                            <option value="Flasche">Flasche</option>
                            <option value="Dose">Dose</option>
                        </select>
                    </div>
                </div>

                <div>
                    <label for="abv">Alkoholgehalt in Vol Prozent</label>
                    <input id="abv" name="abv" type="number" inputmode="decimal" step="0.1" min="0" max="70"
                        placeholder="z.B. 5" required />
                </div>

                <div>
                    <label for="notes">Notizen</label>
                    <textarea id="notes" name="notes" placeholder="optional"></textarea>
                </div>

                <div class="actions">
                    <button id="submit" type="submit">Speichern</button>
                    <button id="reset" type="button" class="secondary">Zurücksetzen</button>
                </div>

                <div id="toast" class="toast"></div>
                <div class="hint">
                    Tipp: Wenn du die Seite zum Homescreen hinzufügst, fühlt es sich wie eine App an.
                </div>
            </form>
        </div>
    </div>

    <script>
        const SCRIPT_URL = "PASTE_YOUR_WEB_APP_URL_HERE";

        const f = document.getElementById("f");
        const toast = document.getElementById("toast");
        const btn = document.getElementById("submit");
        const resetBtn = document.getElementById("reset");

        function showToast(kind, msg) {
            toast.className = "toast " + kind;
            toast.textContent = msg;
            toast.style.display = "block";
            setTimeout(() => { toast.style.display = "none"; }, 2500);
        }

        function pad(n) { return String(n).padStart(2, "0"); }

        function setDefaults() {
            const now = new Date();
            const yyyy = now.getFullYear();
            const mm = pad(now.getMonth() + 1);
            const dd = pad(now.getDate());
            const hh = pad(now.getHours());
            const mi = pad(now.getMinutes());

            document.getElementById("date").value = `${yyyy}-${mm}-${dd}`;
            document.getElementById("time").value = `${hh}:${mi}`;
            document.getElementById("category").value = "";
            document.getElementById("drink").value = "";
            document.getElementById("amount").value = "";
            document.getElementById("unit").value = "ml";
            document.getElementById("abv").value = "";
            document.getElementById("notes").value = "";
        }

        setDefaults();

        resetBtn.addEventListener("click", () => {
            setDefaults();
            showToast("ok", "Zurückgesetzt");
        });

        f.addEventListener("submit", async (e) => {
            e.preventDefault();
            if (!SCRIPT_URL || SCRIPT_URL.includes("PASTE_YOUR_WEB_APP_URL_HERE")) {
                showToast("err", "Bitte zuerst SCRIPT_URL eintragen");
                return;
            }

            const payload = {
                date: document.getElementById("date").value,
                time: document.getElementById("time").value,
                category: document.getElementById("category").value,
                drink: document.getElementById("drink").value.trim(),
                amount: document.getElementById("amount").value,
                unit: document.getElementById("unit").value,
                abv: document.getElementById("abv").value,
                notes: document.getElementById("notes").value.trim()
            };

            btn.disabled = true;

            try {
                const res = await fetch(SCRIPT_URL, {
                    method: "POST",
                    headers: { "Content-Type": "text/plain;charset=utf-8" },
                    body: JSON.stringify(payload)
                });

                const txt = await res.text();
                let json;
                try { json = JSON.parse(txt); } catch { json = { ok: false, error: txt }; }

                if (json.ok) {
                    showToast("ok", "Gespeichert");
                    setDefaults();
                } else {
                    showToast("err", "Fehler beim Speichern");
                }
            } catch (err) {
                showToast("err", "Netzwerkfehler");
            } finally {
                btn.disabled = false;
            }
        });
    </script>
</body>

</html>